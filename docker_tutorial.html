<!DOCTYPE html>
<html lang="en"><head>
<script src="docker_tutorial_files/libs/clipboard/clipboard.min.js"></script>
<script src="docker_tutorial_files/libs/quarto-html/tabby.min.js"></script>
<script src="docker_tutorial_files/libs/quarto-html/popper.min.js"></script>
<script src="docker_tutorial_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="docker_tutorial_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="docker_tutorial_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="docker_tutorial_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="docker_tutorial_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.54">

  <meta name="author" content="Sasha from Russia">
  <title>Containers (in Docker)*</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="docker_tutorial_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="docker_tutorial_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="docker_tutorial_files/libs/revealjs/dist/theme/quarto.css">
  <link href="docker_tutorial_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="docker_tutorial_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="docker_tutorial_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="docker_tutorial_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="docker_tutorial_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="docker_tutorial_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-footer="* this presentation was made in a docker container" class="quarto-title-block center">
  <h1 class="title">Containers (in Docker)*</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Sasha from Russia 
</div>
</div>
</div>

</section>
<section id="presentation-instructions" class="slide level2">
<h2>Presentation Instructions</h2>
<ul>
<li>Navigate: ↑ ← ↓ →</li>
<li>Open presenter’s view with notes (presenter’s version only): S</li>
<li>Enter/exit bird’s-eye view: ESC</li>
</ul>
</section>
<section id="plan" class="slide level2">
<h2>Plan</h2>
<div>
<ul>
<li class="fragment">What containerization is</li>
<li class="fragment">Why care</li>
<li class="fragment">How to get started<br>
</li>
</ul>
</div>
</section>
<section id="what" class="slide level2">
<h2>What?</h2>
<div class="fragment">
<dl>
<dt>Container</dt>
<dd>
<blockquote>
<p>a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another.</p>
</blockquote>
</dd>
</dl>
<aside class="notes">
<p>TLDR: a container is software virtualization with all necessary batteries included and redundant stuff excluded, s.t. it’s lightweight and can run anywhere</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="what-1" class="slide level2">
<h2>What?</h2>
<div class="fragment">
<dl>
<dt>Docker</dt>
<dd>
<blockquote>
<p>a (popular) freemium containerization platform.</p>
</blockquote>
</dd>
</dl>
<div class="fragment">
<p>Includes:<br>
- Docker Desktop<br>
- Docker Hub<br>
- Docker Engine<br>
- Docker Compose</p>
</div>
<aside class="notes">
<p>Technically, “Docker” as a platform has several components, listed here: Desktop, Hub, Engine, Compose. This can make it confusing when people say “Docker”. Usually, when people say “Docker”, they mean containerization as by docker. This is based on the use of the Engine, Compose, and maybe the Hub.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="what-2" class="slide level2">
<h2>What?</h2>
<dl>
<dt>Docker</dt>
<dd>
<blockquote>
<p>a (popular) freemium containerization platform.</p>
</blockquote>
</dd>
</dl>
<p>Includes:<br>
- Docker Desktop<br>
- Docker Hub <span class="emoji" data-emoji="point_left">👈</span><br>
- Docker Engine <span class="emoji" data-emoji="point_left">👈</span><br>
- Docker Compose</p>
<aside class="notes">
<p>Today, we shall concentrate on using the Docker Engine + the Hub through the Linux CLI. When I say “Docker” in this presentation, this is what I will usually mean.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="why" class="slide level2">
<h2>Why?</h2>
<div class="fragment">
<p>Career POV:</p>
</div>
<div class="fragment">
<ul>
<li>Docker/Containers are ubiquitous =&gt; (usually) good for your resume<sup>*</sup></li>
</ul>
<aside class="notes">
<p>Arguably, one of the value propositions of an internship is to make you as job-ready as possible for as wide of an array of opportunities as possible (in DS/ML). Within a subset of the DS/ML job market, there are some opportunities where having experience with auxiliary tooling (e.g.&nbsp;version control, Linux CLI) is an asset. Containerization is one such tool.</p>
<p>* The caveat is of course containerization is not <em>required</em> in all jobs. E.g. teams that tend to use this tech more are production/enterprise-grade DS/ML teams. So usually not as required/marketable in more ad-hoc DS teams, where you run one-off experiments and research.</p>
<p>That said, containers are everywhere. E.g. “From Gmail to YouTube to Search, everything at Google runs in containers.<a name="cite_ref-1" href=""></a><a href="#/cite_note-1"><sup>[1]</sup></a> If you used a smartphone app, chances are it is served up to you from a container. Beside marketability as skill, you may also find containers useful in your own projects.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<ul>
<li>Docker/Containers are integral to our/others’ tech stack, but uni’s often don’t teach this =&gt; opportunity to learn</li>
</ul>
<aside class="notes">
<p>Traditional academic programs are good at teaching you core competences, like ML/statistical modeling and theory. But the latest tools of the trade used in the industry are often not taught; usually through no fault of their own. On the other hand, our ML team uses containers everywhere: from setting up replicable and shareable development environments to deploying and scaling entreprise machine learning solutions. Since this technology is frequently not part of DS/ML academic curriculum, being embedded in this team is an additional opportunity for you to expand your DS toolkit.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="why-1" class="slide level2">
<h2>Why?</h2>
<div class="fragment">
<p>Practical POV:</p>
</div>
<div class="fragment">
<ul>
<li>Separation of responsibility</li>
</ul>
<aside class="notes">
<p><a name="cite_ref-1" href=""></a><a href="#/cite_note-1"><sup>[1]</sup></a></p>
<p>Containerization provides a clear separation of responsibility, as developers focus on application logic and dependencies, while IT operations teams can focus on deployment and management instead of application details such as specific software versions and configurations.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<ul>
<li>Workload portability</li>
</ul>
<aside class="notes">
<p><a name="cite_ref-1" href=""></a><a href="#/cite_note-1"><sup>[1]</sup></a></p>
<p>Containers can run virtually anywhere, greatly easing development and deployment: on Linux, Windows, and Mac operating systems; on virtual machines or on physical servers; on a developer’s machine or in data centers on-premises; and of course, in the public cloud.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
<div class="fragment">
<ul>
<li>Application isolation</li>
</ul>
<aside class="notes">
<p><a name="cite_ref-1" href=""></a><a href="#/cite_note-1"><sup>[1]</sup></a></p>
<p>Containers virtualize CPU, memory, storage, and network resources at the operating system level, providing developers with a view of the OS logically isolated from other applications. Applications are safer in containers.<a name="cite_ref-3" href=""></a><a href="#/cite_note-3"><sup>[3]</sup></a></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="why-2" class="slide level2">
<h2>Why?</h2>
<p><img data-src="media/container-vm-whatcontainer_2-980x783.png" class="absolute" style="top: 125px; left: 0px; height: 400px; "><br>
<img data-src="media/docker-containerized-appliction-blue-border_2-980x783.png" class="absolute fragment" style="top: 125px; right: 50px; height: 400px; "></p>
<div class="fragment">
<p><img data-src="media/cat-turtle-animals-fun.gif" class="absolute" style="top: 225px; left: 20px; height: 400px; "><br>
<img data-src="media/cheetah-running.gif" class="absolute" style="top: 225px; right: 30px; height: 300px; "></p>
</div>
<aside class="notes">
<p>When trying to solve for the practical items on the previous slide, things like package environments (e.g.&nbsp;<code>venv</code>, <code>conda</code>, etc.) can help, but they don’t replicate enough of the OS for full portability. E.g. your co-worker or the production server in the cloud may have Linux while you have developed in a <code>conda</code> environment on a Mac. To solve this problem we could try using a VM. But VMs virtualize the hardware and include the full OS. This makes them more hardware intensive and usually bigger in size (tens of GBs), and slow to boot.</p>
<p>NEXT FRAGMENT</p>
<p>Containers, on the other hand, virtualize software only, are less hardware-hungry, and share the OS kernel. Containers, on the other hand, virtualize software only, are less hardware-hungry, and share the OS kernel. This makes them faster and more economical than VMs while achieving portability and isolation. Containers are typically tens of MBs to a few GBs in size.</p>
<p>NEXT FRAGMENT</p>
<p>It is not that there are no use cases for VM’s, but for the goals we’re trying to achieve Docker Containers have become the industry and our team’s standard.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="tldr-so-far" class="slide level2">
<h2>TLDR So Far</h2>
<div class="column" style="width:50%;">
<div class="fragment">
<p>Containers:</p>
<ul>
<li>ubiquotous<br>
</li>
<li>shippable<br>
</li>
<li>isolated<br>
</li>
<li>cross-platform<br>
</li>
<li>light<br>
</li>
<li>free<br>
</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment">
<p>Docker:</p>
<ul>
<li>makes containers easier<br>
</li>
<li>popular</li>
<li>free for personal use</li>
</ul>
</div>
</div></section>
<section id="how" class="slide level2">
<h2>How?</h2>
<h3 id="workflow-from-a-dockerfile">Workflow: from a Dockerfile</h3>
<div class="columns">
<div class="column" style="width:25%;">
<div class="fragment" data-fragment-index="1">
<div style="text-align: center">
<p><img data-src="media/docker_file_orange.png" class="quarto-figure quarto-figure-center" height="200"> Dockerfile</p>
</div>
</div>
</div><div class="column" style="width:10%;">
<div style="font-size: 100%;">
<div class="absolute" style="top: 265px; left: 260px; ">
<div class="fragment" data-fragment-index="2">
<pre><code>docker
build</code></pre>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<p><img data-src="media/arrow_right.png" class="absolute" style="top: 300px; height: 50px; "></p>
</div>
</div>
</div><div class="column" style="width:25%;">
<div class="fragment" data-fragment-index="3">
<div style="text-align: center">
<p><img data-src="media/docker_image.png" class="quarto-figure quarto-figure-center" height="200"><br>
Docker Image</p>
</div>
</div>
</div><div class="column" style="width:10%;">
<div style="font-size: 100%;">
<div class="absolute" style="top: 265px; right: 315px; ">
<div class="fragment" data-fragment-index="4">
<pre><code>docker
run</code></pre>
</div>
</div>
<div class="fragment" data-fragment-index="4">
<p><img data-src="media/arrow_right.png" class="absolute" style="top: 300px; right: 335px; height: 50px; "></p>
</div>
</div>
</div><div class="column" style="width:30%;">
<div class="fragment" data-fragment-index="5">
<div style="text-align: left">
<p><img data-src="media/docker_container.png" class="quarto-figure quarto-figure-right" height="200"><br>
Docker Container</p>
</div>
</div>
</div></div>
<aside class="notes">
<p>We shall explain the individual elements of the Docker workflow in more detail later, but here’s the workflow in a nutshell: NEXT FRAGMENT<br>
We go from a Dockerfile, which is a just a plain textfile that the docker engine interprets… NEXT FRAGMENT<br>
Via a <code>docker build</code> command. NEXT FRAGMENT<br>
To turn it into a Docker Image. NEXT FRAGMENT<br>
We then use the <code>docker run</code> command… NEXT FRAGMENT<br>
To turn an image into a Docker Container.</p>
<p>The analogy with programming is Dockerfile is like your “source code”. When you do <code>docker build</code>, it’s like compiling it into an <code>image</code> executable. Then, you can run many different “instances” or execute that “compiled” code, or <code>image</code>. These executed image “instances” are Docker containers.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-1" class="slide level2">
<h2>How?</h2>
<h3 id="workflow-from-a-registry">Workflow: from a Registry</h3>
<div class="columns">
<div class="column" style="width:25%;">
<div style="text-align: center">
<p><img data-src="media/docker_registry.svg" class="quarto-figure quarto-figure-center" height="200"> Docker Registry</p>
</div>
</div><div class="column" style="width:10%;">
<div style="font-size: 100%;">
<div class="absolute" style="top: 265px; left: 260px; ">
<pre><code>docker
pull</code></pre>
</div>
<p><img data-src="media/arrow_right.png" class="absolute" style="top: 300px; height: 50px; "></p>
</div>
</div><div class="column" style="width:25%;">
<div style="text-align: center">
<p><img data-src="media/docker_image.png" class="quarto-figure quarto-figure-center" height="200"><br>
Docker Image</p>
</div>
</div><div class="column" style="width:10%;">
<div style="font-size: 100%;">
<div class="absolute" style="top: 265px; right: 315px; ">
<pre><code>docker
run</code></pre>
</div>
<p><img data-src="media/arrow_right.png" class="absolute" style="top: 300px; right: 335px; height: 50px; "></p>
</div>
</div><div class="column" style="width:28%;">
<div style="text-align: left">
<p><img data-src="media/docker_container.png" class="quarto-figure quarto-figure-right" height="200"><br>
Docker Container</p>
</div>
</div></div>
<aside class="notes">
<p>Note that we don’t have to start with the Dockerfile. We can download a pre-built image from a container registry<a name="cite_ref-4" href=""></a><a href="#/cite_note-4"><sup>[4]</sup></a>. This is useful when we don’t want to write our own Dockerfile and build an image. Our ML team has a private registry. Docker Hub is a popular public registry.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="docker-image" class="slide level2 center">
<h2>Docker Image</h2>
</section>
<section id="how-2" class="slide level2">
<h2>How?</h2>
<h3 id="docker-image-naming">Docker Image: Naming</h3>
<div>
<ul>
<li class="fragment">Name structure: <code>registry/repository/image_name:tag</code>
<ul>
<li class="fragment"><code>registry</code> - Is registry where the image is hosted; when skipped, defaults to <code>docker.io</code>, i.e.&nbsp;the Docker Hub</li>
<li class="fragment"><code>repository</code> - Is repository where the image is hosted; not needed for Docker Official Images</li>
<li class="fragment"><code>image_name</code> - Is the name of the image itself.</li>
<li class="fragment"><code>tag</code> - Is a tagged “state” of that image that the creator has deemed useful.<br>
</li>
</ul></li>
</ul>
</div>
<aside class="notes">
<p>This should be self-explanatory.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-3" class="slide level2">
<h2>How?</h2>
<h3 id="docker-image-naming-1">Docker Image: Naming</h3>
<ul>
<li>Name structure: <code>registry/repository/image_name:tag</code></li>
</ul>
<div>
<ul>
<li class="fragment">For example:</li>
</ul>
<div class="fragment">
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href=""></a><span class="ex">docker.io/python:3.6.4</span>  <span class="co"># Image name in a Docker Hub</span></span>
<span id="cb5-2"><a href=""></a><span class="ex">python:3.6.4</span>  <span class="co"># Same as above</span></span>
<span id="cb5-3"><a href=""></a><span class="ex">pytorch/pytorch:2.4.0-cuda11.8-cudnn9-runtime</span>  <span class="co"># In a Docker Hub/Pytorch repo</span></span>
<span id="cb5-4"><a href=""></a><span class="ex">my_private_registry/some/repo/my_image:cool_tag-1.3</span>  <span class="co"># In a private registry</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li class="fragment"><a href="https://docs.docker.com/trusted-content/official-images/" target="&quot;_blank">Docker Official Images</a> skip <code>repository</code> name; considered common starting points and more secure</li>
<li class="fragment">You can see Docker Hub repositories/images via browser <a href="https://hub.docker.com/" target="_blank">here</a><br>
</li>
</ul>
</div>
</section>
<section id="how-4" class="slide level2">
<h2>How?</h2>
<h3 id="docker-image-list">Docker Image: List</h3>
<div class="fragment">
<p>Your turn! List your local images in Linux CLI:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href=""></a><span class="ex">docker</span> images</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>If you need to report digest numbers:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href=""></a><span class="ex">docker</span> images <span class="at">--digests</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Digest numbers are <em>more likely</em> (i.e.&nbsp;still not guaranteed) to uniquely identify an image than just a name and tag combination.</p>
</div>
<aside class="notes">
<p>As mentioned, <code>registry</code> is optional, and defaults to Docker Hub. <code>repository</code> is optional for Docker Official Images.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside class="notes">
<p>If you’re just staring to do Docker locally, this list may be empty.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-5" class="slide level2">
<h2>How?</h2>
<h3 id="docker-image-pull">Docker Image: Pull</h3>
<div class="fragment small">
<p>Now try pulling (== downloading) this Alpine Linux image from the Docker Hub registry:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href=""></a><span class="ex">docker</span> pull docker.io/alpine:3.14</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Because <code>docker.io</code> is the default, this would do the same:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href=""></a><span class="ex">docker</span> pull alpine:3.14</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Once pulled, you have this image locally, so if you try pulling again, it won’t download (unless the image changed in the registry).</p>
</div>
<div class="fragment">
<p>Check your docker images again to see the newly pulled image it there:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href=""></a><span class="ex">docker</span> images</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-6" class="slide level2">
<h2>How?</h2>
<h3 id="docker-image-delete">Docker Image: Delete</h3>
<div class="fragment">
<p>Note that <code>docker images</code> lists images both by repo, tag, and image ID (which is the hash for the last layer). You can delete an image in various ways.<br>
Try this (by image name):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href=""></a><span class="ex">docker</span> rmi alpine:3.14</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>OR this (by beginning characters that <em>uniquely</em> match an <code>IMAGE ID</code>):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href=""></a><span class="ex">docker</span> rmi 9e1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then check your docker images again to confirm deletion:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href=""></a><span class="ex">docker</span> images</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-7" class="slide level2">
<h2>How?</h2>
<h3 id="docker-image-login">Docker Image: Login</h3>
<p>Note that, if we were pulling from a private registry, we’d likely have to login first:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href=""></a><span class="ex">docker</span> login my_private_registry  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then pull from that registry:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href=""></a><span class="ex">docker</span> pull my_private_registry/some/repo/my_image:my_super_cool_tag-1.3  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<p>Less commonly used, but to push an image into a private repository:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href=""></a><span class="ex">docker</span> push my_private_registry/some/repo/my_image:my_super_cool_tag-1.3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="docker-container" class="slide level2 center">
<h2>Docker Container</h2>
</section>
<section id="how-8" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-1">Docker Container</h3>
<div class="fragment">
<p><strong>Use case</strong>: Setting up a portable and reproducible DS development environment.</p>
</div>
<div class="fragment">
<p>Since we work in DS/ML, let’s download this Python scientific stack image from the official <a href="https://jupyter-docker-stacks.readthedocs.io/en/latest/" target="_blank">Jupyter Docker Stacks</a>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href=""></a><span class="ex">docker</span> pull quay.io/jupyter/scipy-notebook:python-3.11.9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And, as usual, see that it’s there:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href=""></a><span class="ex">docker</span> images</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>Let’s go over a <strong>use case</strong>: setting up a Python-based, reproducible/portable DS development environment.</p>
<p>Note that we are downloading from a different registry, <code>quai.io</code>, and from the official <code>jupyter</code> repo.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-9" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-run">Docker Container: Run</h3>
<div class="fragment">
<p>The syntax for command to start a container:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href=""></a><span class="ex">docker</span> run <span class="pp">[</span><span class="ss">OPTIONS</span><span class="pp">]</span> IMAGE[:TAG<span class="kw">|</span><span class="ex">@DIGEST]</span> <span class="pp">[</span><span class="ss">COMMAND</span><span class="pp">]</span> <span class="pp">[</span><span class="ss">ARG...</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Let’s start a container for the first time from the image we downloaded (make sure nothing is taking that port currently, or map onto a different port).:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href=""></a><span class="ex">docker</span> run <span class="at">-p</span> 8888:8888 quay.io/jupyter/scipy-notebook:python-3.11.9</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>Remember that a Container is like an “instance” of an Image. Let’s “instantiate” an image into a container by doing the <code>run</code> command.<br>
We also see the <code>-p</code> flag, which maps port <code>8888</code> on our host machine to the <code>8888</code> on the container side. This is because Jupyter server starts at the <code>8888</code> port by default.</p>
<p>And you can run many different containers from this same image. You would just have to make sure to choose a new unused port on the host for the port mapping.</p>
<p>If you ever forget the port order mapping, think <code>host:guest</code>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-10" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-run-contd">Docker Container: Run Cont’d</h3>
<div class="fragment" style="font-size: 75%;">
<p>Now, assuming port <code>8888</code> on your host was not already taken, we should see the <code>http://127.0.0.1:8888/lab?token=...</code> URL in the CLI logs, and navigate to that address in the browser.</p>
</div>
<div class="fragment">
<div style="font-size: 75%;">
<p>To see all <em>running</em> containers, open a <em>new terminal session</em> (<kbd>CTRL</kbd> + <kbd>ALT</kbd> + <kbd>T</kbd> on Linux) and enter:</p>
</div>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href=""></a><span class="ex">docker</span> ps</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div style="font-size: 75%;">
<p>This should list them all, including the image name from which the container was built, container name, ports, etc.</p>
</div>
</div>
<aside class="notes">
<p>If we go to the URL in our browser (on the host side), we can start developing in that instance.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-11" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-stop">Docker Container: Stop</h3>
<div class="fragment">
<p>To (gracefully) stop a container from running:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href=""></a><span class="ex">docker</span> stop CONTAINER_NAME<span class="kw">|</span><span class="ex">CONTAINER_ID</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div style="font-size: 75%;">
<p>Just like with Docker images, containers can be idenfied with either a full container name <em>or</em> a full or partial container ID (with unique matching).</p>
</div>
</div>
<div class="fragment">
<p>Your turn! Find the ID and/or a name of your Jupyter container and stop it. Check via <code>docker ps</code> that it is no longer running.</p>
</div>
</section>
<section id="how-12" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-stop-contd">Docker Container: Stop Cont’d</h3>
<div class="fragment" data-fragment-index="1">
<p>Note that, if there are any issues, like with a real PC, you can force shut down your container like so:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href=""></a><span class="ex">docker</span> kill CONTAINER_NAME<span class="kw">|</span><span class="ex">CONTAINER_ID</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The difference with <code>stop</code> is <code>kill</code> is akin to using the force shutdown button on your PC.*</p>
</div>
<div class="fragment" data-fragment-index="2">
<p>Because this particular container was a Jupyter Server, we could have also <kbd>CTRL</kbd> + <kbd>C</kbd> in the live logs (STDOUT) to close the session down.</p>
</div>
<div class="fragment" data-fragment-index="1">
<div style="font-size: 35%; text-align: center;">
<p>*in UNIX terms, <code>stop</code> attempts to <code>SIGTERM</code> first, before doing <code>SIGKILL</code>; <code>kill</code> just <code>SIGKILL</code>’s immediately</p>
</div>
</div>
</section>
<section id="how-13" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-stop-contd-1">Docker Container: Stop Cont’d</h3>
<div class="fragment">
<p>You can see all containers, including the dormant ones with the <code>-a</code> flag. Try:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href=""></a><span class="ex">docker</span> ps <span class="at">-a</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-14" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-stop-contd-2">Docker Container: Stop Cont’d</h3>
<div class="fragment">
<p>You can restart a stopped/killed container that’s already been <code>run</code>, i.e.&nbsp;created from an image:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href=""></a><span class="ex">docker</span> start <span class="pp">[</span><span class="ss">OPTIONS</span><span class="pp">]</span> CONTAINER_NAME<span class="kw">|</span><span class="ex">CONTAINER_ID</span> <span class="pp">[</span><span class="ss">CONTAINER...</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-15" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-stop-contd-3">Docker Container: Stop Cont’d</h3>
<div class="fragment">
<p>To delete a stopped container for good:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href=""></a><span class="ex">docker</span> rm <span class="pp">[</span><span class="ss">OPTIONS</span><span class="pp">]</span> CONTAINER_NAME<span class="kw">|</span><span class="ex">CONTAINER_ID</span> <span class="pp">[</span><span class="ss">CONTAINER...</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Try deleting the Jupyter Server container we stopped earlier.</p>
</div>
</section>
<section id="how-16" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-share-volumes">Docker Container: Share Volumes</h3>
<div class="fragment">
<p>Let’s complicate things a bit and learn some additional flags and other commands along the way.</p>
<p><strong>Use case extension</strong>: share our local volume so that we can access it from inside a container + persist file changes!</p>
</div>
</section>
<section id="how-17" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">How?</h2>
<h3 id="docker-container-share-volumes-contd">Docker Container: Share Volumes Cont’d</h3>
<div class="fragment">
<div style="font-size: 75%;">
<p>TLDR: To share a host volume, we need to (re-)run the container where we want the volume mounted and use the <code>-v</code> flag:</p>
</div>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb27-1" class="hljs-ln-code"><a href=""></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--rm</span> <span class="dt">\</span></span>
<span id="cb27-2" class="hljs-ln-code"><a href=""></a>    <span class="at">--user</span> <span class="st">"</span><span class="va">$(</span><span class="fu">id</span> <span class="at">-u</span><span class="va">)</span><span class="st">"</span> <span class="at">--group-add</span> users <span class="dt">\</span></span>
<span id="cb27-3" class="hljs-ln-code"><a href=""></a>    <span class="at">-p</span> 8888:8888 <span class="dt">\</span></span>
<span id="cb27-4" class="hljs-ln-code"><a href=""></a>    <span class="at">-v</span> <span class="st">"</span><span class="va">${PWD}</span><span class="st">"</span>/:/home/jovyan/work <span class="dt">\</span></span>
<span id="cb27-5" class="hljs-ln-code"><a href=""></a>    quay.io/jupyter/scipy-notebook:python-3.11.9 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>Let’s go over this line by line.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-18" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">How?</h2>
<h3 id="docker-container-share-volumes-contd-1">Docker Container: Share Volumes Cont’d</h3>
<div class="sourceCode" id="cb28" data-code-line-numbers="1-5|1|2"><pre class="sourceCode numberSource bash number-lines code-with-copy" data-id="quarto-animate-code"><code class="sourceCode bash hljs"><span id="cb28-1" class="hljs-ln-code"><a href=""></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--rm</span> <span class="dt">\</span></span>
<span id="cb28-2" class="hljs-ln-code"><a href=""></a>    <span class="at">--user</span> <span class="st">"</span><span class="va">$(</span><span class="fu">id</span> <span class="at">-u</span><span class="va">)</span><span class="st">"</span> <span class="at">--group-add</span> users <span class="dt">\</span></span>
<span id="cb28-3" class="hljs-ln-code"><a href=""></a>    <span class="at">-p</span> 8888:8888 <span class="dt">\</span></span>
<span id="cb28-4" class="hljs-ln-code"><a href=""></a>    <span class="at">-v</span> <span class="st">"</span><span class="va">${PWD}</span><span class="st">"</span>/:/home/jovyan/work <span class="dt">\</span></span>
<span id="cb28-5" class="hljs-ln-code"><a href=""></a>    quay.io/jupyter/scipy-notebook:python-3.11.9 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div style="font-size: 75%;">
<ul>
<li><code>-it</code> makes the container interactive</li>
<li><code>--rm</code> auto-removes the container after it gets stopped or killed</li>
<li><code>--user</code> supplies container’s user ID</li>
<li><code>"$(id -u)"</code> - our host user ID; will be container user’s user ID</li>
<li><code>--group-add</code> adds a new user group. <a href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/troubleshooting.html#additional-tips-and-troubleshooting-commands-for-permission-related-errors" target="_blank">Jupyter Stacks Docs tell us to do that</a>.</li>
</ul>
</div>
</section>
<section id="how-19" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-share-volumes-contd-2">Docker Container: Share Volumes Cont’d</h3>
<div class="sourceCode" id="cb29" data-code-line-numbers="3,5|4"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href=""></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--rm</span> <span class="dt">\</span></span>
<span id="cb29-2"><a href=""></a>    <span class="at">--user</span> <span class="st">"</span><span class="va">$(</span><span class="fu">id</span> <span class="at">-u</span><span class="va">)</span><span class="st">"</span> <span class="at">--group-add</span> users <span class="dt">\</span></span>
<span id="cb29-3"><a href=""></a>    <span class="at">-p</span> 8888:8888 <span class="dt">\</span></span>
<span id="cb29-4"><a href=""></a>    <span class="at">-v</span> <span class="st">"</span><span class="va">${PWD}</span><span class="st">"</span>/:/home/jovyan/work <span class="dt">\</span></span>
<span id="cb29-5"><a href=""></a>    quay.io/jupyter/scipy-notebook:python-3.11.9 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div style="font-size: 75%;">
<ul>
<li>We use the same port mapping and image as before</li>
<li>The <code>-v</code> flag maps host to container volume. It uses the same <code>host:guest</code> syntax.</li>
<li><code>"${PWD}"</code> - path of the current working directory (on host)</li>
</ul>
</div>
</section>
<section id="how-20" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-share-volumes-contd-3">Docker Container: Share Volumes Cont’d</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href=""></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--rm</span> <span class="dt">\</span></span>
<span id="cb30-2"><a href=""></a>    <span class="at">--user</span> <span class="st">"</span><span class="va">$(</span><span class="fu">id</span> <span class="at">-u</span><span class="va">)</span><span class="st">"</span> <span class="at">--group-add</span> users <span class="dt">\</span></span>
<span id="cb30-3"><a href=""></a>    <span class="at">-p</span> 8888:8888 <span class="dt">\</span></span>
<span id="cb30-4"><a href=""></a>    <span class="at">-v</span> <span class="st">"</span><span class="va">${PWD}</span><span class="st">"</span>/:/home/jovyan/work <span class="dt">\</span></span>
<span id="cb30-5"><a href=""></a>    quay.io/jupyter/scipy-notebook:python-3.11.9 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Be careful! Mounting makes the Docker container think these files are its own. Deleting a file inside the container <strong><em>WILL</em></strong> delete it on the host! That being said, mounting a file can be really useful for debugging and development.</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<p><code>cd</code> into a safe directory to mount and run this monster!</p>
</div>
</section>
<section id="how-21" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-execute-commands">Docker Container: Execute Commands</h3>
<div class="fragment">
<p>To run any command in a live container, use:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href=""></a><span class="ex">docker</span> exec <span class="pp">[</span><span class="ss">OPTIONS</span><span class="pp">]</span> CONTAINER COMMAND <span class="pp">[</span><span class="ss">ARG...</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>For example, to run an interactive (note the <code>-it</code>) Python shell:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href=""></a><span class="ex">docker</span> exec <span class="at">-it</span> CONTAINER_ID<span class="kw">|</span><span class="ex">CONTAINER_NAME</span> python</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or an interactive (note the <code>-it</code>) <code>bash</code> terminal:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href=""></a><span class="ex">docker</span> exec <span class="at">-it</span> CONTAINER_ID<span class="kw">|</span><span class="ex">CONTAINER_NAME</span> bash</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-22" class="slide level2">
<h2>How?</h2>
<h3 id="docker-container-execute-commands-contd">Docker Container: Execute Commands Cont’d</h3>
<div class="fragment">
<p>Your turn! Let’s see file persistence in action:</p>
<ol type="1">
<li>Bash into your live Jupyter Server container<br>
</li>
<li>Use <code>cd</code> and <code>ls</code> commands to check that your host directory mounted into the container</li>
<li><code>touch</code> to make a test file from inside a container</li>
<li>Stop your container</li>
<li>Remove your container for good</li>
<li>On your host, make sure that the file you created persisted</li>
<li>Feel good<br>
</li>
</ol>
</div>
</section>
<section id="dockerfile" class="slide level2 center">
<h2>Dockerfile</h2>
</section>
<section id="how-23" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-1">Dockerfile</h3>
<div class="fragment">
<p>So far: pulled images someone else made and instantiated them into containers</p>
</div>
<div class="fragment">
<p>Up next: build our own images using Dockerfiles</p>
</div>
</section>
<section id="how-24" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure">Dockerfile: Structure</h3>
<div class="fragment">
<p>TLDR: Dockerfile == fancy text file with layered instructions</p>
</div>
<div class="fragment">
<div>
<p>Longer version:</p>
<ul>
<li class="fragment">By convention/expected default, named <code>Dockerfile</code>. But can be whatever.</li>
<li class="fragment">Each line’s format:
<ul>
<li class="fragment"><div class="sourceCode" id="cb34"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb34-1"><a href=""></a>  INSTRUCTION arguments  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ul></li>
<li class="fragment">Each line creates a new “layer”; from top to bottom (i.e.&nbsp;order matters)</li>
<li class="fragment">Full list of Dockerfile commands <a href="https://docs.docker.com/reference/dockerfile/" target="_blank">here</a><br>
</li>
</ul>
</div>
</div>
</section>
<section id="how-25" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-real-example">Dockerfile: Structure <a href="https://github.com/jupyter/docker-stacks/blob/7a918f53599a896ec45cb6886c515be7adaee6c3/images/base-notebook/Dockerfile" target="_blank">Real Example</a></h3>
<div class="fragment">
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb35-1"><a href=""></a><span class="co"># Copyright (c) Jupyter Development Team.</span></span>
<span id="cb35-2"><a href=""></a><span class="co"># Distributed under the terms of the Modified BSD License.</span></span>
<span id="cb35-3"><a href=""></a><span class="kw">ARG</span> REGISTRY=quay.io</span>
<span id="cb35-4"><a href=""></a><span class="kw">ARG</span> OWNER=jupyter</span>
<span id="cb35-5"><a href=""></a><span class="kw">ARG</span> BASE_CONTAINER=$REGISTRY/$OWNER/docker-stacks-foundation</span>
<span id="cb35-6"><a href=""></a><span class="kw">FROM</span> $BASE_CONTAINER</span>
<span id="cb35-7"><a href=""></a></span>
<span id="cb35-8"><a href=""></a><span class="kw">LABEL</span> maintainer=<span class="st">"Jupyter Project &lt;jupyter@googlegroups.com&gt;"</span></span>
<span id="cb35-9"><a href=""></a></span>
<span id="cb35-10"><a href=""></a><span class="co"># Fix: https://github.com/hadolint/hadolint/wiki/DL4006</span></span>
<span id="cb35-11"><a href=""></a><span class="co"># Fix: https://github.com/koalaman/shellcheck/wiki/SC3014</span></span>
<span id="cb35-12"><a href=""></a><span class="kw">SHELL</span> [<span class="st">"/bin/bash"</span>, <span class="st">"-o"</span>, <span class="st">"pipefail"</span>, <span class="st">"-c"</span>]</span>
<span id="cb35-13"><a href=""></a></span>
<span id="cb35-14"><a href=""></a><span class="kw">USER</span> root</span>
<span id="cb35-15"><a href=""></a></span>
<span id="cb35-16"><a href=""></a><span class="co"># Install all OS dependencies for the Server that starts</span></span>
<span id="cb35-17"><a href=""></a><span class="co"># but lacks all features (e.g., download as all possible file formats)</span></span>
<span id="cb35-18"><a href=""></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="at">--yes</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-19"><a href=""></a>    <span class="ex">apt-get</span> install <span class="at">--yes</span> <span class="at">--no-install-recommends</span> <span class="dt">\</span></span>
<span id="cb35-20"><a href=""></a>    <span class="co"># - Add necessary fonts for matplotlib/seaborn</span></span>
<span id="cb35-21"><a href=""></a>    <span class="co">#   See https://github.com/jupyter/docker-stacks/pull/380 for details</span></span>
<span id="cb35-22"><a href=""></a>    fonts-liberation <span class="op">\</span></span>
<span id="cb35-23"><a href=""></a>    <span class="co"># - `pandoc` is used to convert notebooks to html files</span></span>
<span id="cb35-24"><a href=""></a>    <span class="co">#   it's not present in the aarch64 Ubuntu image, so we install it here</span></span>
<span id="cb35-25"><a href=""></a>    pandoc <span class="op">\</span></span>
<span id="cb35-26"><a href=""></a>    <span class="co"># - `run-one` - a wrapper script that runs no more</span></span>
<span id="cb35-27"><a href=""></a>    <span class="co">#   than one unique instance of some command with a unique set of arguments,</span></span>
<span id="cb35-28"><a href=""></a>    <span class="co">#   we use `run-one-constantly` to support the `RESTARTABLE` option</span></span>
<span id="cb35-29"><a href=""></a>    run-one &amp;&amp; <span class="op">\</span></span>
<span id="cb35-30"><a href=""></a>    apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*</span>
<span id="cb35-31"><a href=""></a></span>
<span id="cb35-32"><a href=""></a><span class="kw">USER</span> ${NB_UID}</span>
<span id="cb35-33"><a href=""></a></span>
<span id="cb35-34"><a href=""></a><span class="co"># Install JupyterLab, Jupyter Notebook, JupyterHub and NBClassic</span></span>
<span id="cb35-35"><a href=""></a><span class="co"># Generate a Jupyter Server config</span></span>
<span id="cb35-36"><a href=""></a><span class="co"># Cleanup temporary files</span></span>
<span id="cb35-37"><a href=""></a><span class="co"># Correct permissions</span></span>
<span id="cb35-38"><a href=""></a><span class="co"># Do all this in a single RUN command to avoid duplicating all of the</span></span>
<span id="cb35-39"><a href=""></a><span class="co"># files across image layers when the permissions change</span></span>
<span id="cb35-40"><a href=""></a><span class="kw">WORKDIR</span> /tmp</span>
<span id="cb35-41"><a href=""></a><span class="kw">RUN</span> <span class="ex">mamba</span> install <span class="at">--yes</span> <span class="dt">\</span></span>
<span id="cb35-42"><a href=""></a>    <span class="st">'jupyterlab'</span> <span class="dt">\</span></span>
<span id="cb35-43"><a href=""></a>    <span class="st">'notebook'</span> <span class="dt">\</span></span>
<span id="cb35-44"><a href=""></a>    <span class="st">'jupyterhub'</span> <span class="dt">\</span></span>
<span id="cb35-45"><a href=""></a>    <span class="st">'nbclassic'</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-46"><a href=""></a>    <span class="ex">jupyter</span> server <span class="at">--generate-config</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-47"><a href=""></a>    <span class="ex">mamba</span> clean <span class="at">--all</span> <span class="at">-f</span> <span class="at">-y</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-48"><a href=""></a>    <span class="ex">npm</span> cache clean <span class="at">--force</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-49"><a href=""></a>    <span class="ex">jupyter</span> lab clean <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-50"><a href=""></a>    <span class="fu">rm</span> <span class="at">-rf</span> <span class="st">"/home/</span><span class="va">${NB_USER}</span><span class="st">/.cache/yarn"</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-51"><a href=""></a>    <span class="ex">fix-permissions</span> <span class="st">"</span><span class="va">${CONDA_DIR}</span><span class="st">"</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb35-52"><a href=""></a>    <span class="ex">fix-permissions</span> <span class="st">"/home/</span><span class="va">${NB_USER}</span><span class="st">"</span></span>
<span id="cb35-53"><a href=""></a></span>
<span id="cb35-54"><a href=""></a><span class="kw">ENV</span> JUPYTER_PORT=8888</span>
<span id="cb35-55"><a href=""></a><span class="kw">EXPOSE</span> $JUPYTER_PORT</span>
<span id="cb35-56"><a href=""></a></span>
<span id="cb35-57"><a href=""></a><span class="co"># Configure container startup</span></span>
<span id="cb35-58"><a href=""></a><span class="kw">CMD</span> [<span class="st">"start-notebook.py"</span>]</span>
<span id="cb35-59"><a href=""></a></span>
<span id="cb35-60"><a href=""></a><span class="co"># Copy local files as late as possible to avoid cache busting</span></span>
<span id="cb35-61"><a href=""></a><span class="kw">COPY</span> start-notebook.py start-notebook.sh start-singleuser.py start-singleuser.sh /usr/local/bin/</span>
<span id="cb35-62"><a href=""></a><span class="kw">COPY</span> jupyter_server_config.py docker_healthcheck.py /etc/jupyter/</span>
<span id="cb35-63"><a href=""></a></span>
<span id="cb35-64"><a href=""></a><span class="co"># Fix permissions on /etc/jupyter as root</span></span>
<span id="cb35-65"><a href=""></a><span class="kw">USER</span> root</span>
<span id="cb35-66"><a href=""></a><span class="kw">RUN</span> <span class="ex">fix-permissions</span> /etc/jupyter/</span>
<span id="cb35-67"><a href=""></a></span>
<span id="cb35-68"><a href=""></a><span class="co"># HEALTHCHECK documentation: https://docs.docker.com/engine/reference/builder/#healthcheck</span></span>
<span id="cb35-69"><a href=""></a><span class="co"># This healtcheck works well for `lab`, `notebook`, `nbclassic`, `server`, and `retro` jupyter commands</span></span>
<span id="cb35-70"><a href=""></a><span class="co"># https://github.com/jupyter/docker-stacks/issues/915#issuecomment-1068528799</span></span>
<span id="cb35-71"><a href=""></a><span class="kw">HEALTHCHECK</span> <span class="op">--interval=3s</span> <span class="op">--timeout=1s</span> <span class="op">--start-period=3s</span> <span class="op">--retries=3</span> \</span>
<span id="cb35-72"><a href=""></a>    <span class="kw">CMD</span> <span class="ex">/etc/jupyter/docker_healthcheck.py</span> <span class="kw">||</span> <span class="bu">exit</span> 1</span>
<span id="cb35-73"><a href=""></a></span>
<span id="cb35-74"><a href=""></a><span class="co"># Switch back to jovyan to avoid accidental container runs as root</span></span>
<span id="cb35-75"><a href=""></a><span class="kw">USER</span> ${NB_UID}</span>
<span id="cb35-76"><a href=""></a></span>
<span id="cb35-77"><a href=""></a><span class="kw">WORKDIR</span> <span class="st">"${HOME}"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<aside class="notes">
<p>Explain various commands here.</p>
<p>Comments use pound signs.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-26" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-real-example-contd">Dockerfile: Structure <a href="https://github.com/jupyter/docker-stacks/blob/7a918f53599a896ec45cb6886c515be7adaee6c3/images/base-notebook/Dockerfile" target="_blank">Real Example</a> Cont’d</h3>
<div class="fragment">
<p>Define build-time variables:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb36-1"><a href=""></a><span class="kw">ARG</span> REGISTRY=quay.io</span>
<span id="cb36-2"><a href=""></a><span class="kw">ARG</span> OWNER=jupyter</span>
<span id="cb36-3"><a href=""></a><span class="kw">ARG</span> BASE_CONTAINER=$REGISTRY/$OWNER/docker-stacks-foundation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Define base image layer (examples):</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb37-1"><a href=""></a><span class="kw">FROM</span> python:3.6.4</span>
<span id="cb37-2"><a href=""></a><span class="co"># OR</span></span>
<span id="cb37-3"><a href=""></a><span class="kw">FROM</span> ubuntu@sha256:6eb24585b1b2e7402600450d289ea0fd195cfb76893032bbbb3943e041ec8a65</span>
<span id="cb37-4"><a href=""></a><span class="co"># OR</span></span>
<span id="cb37-5"><a href=""></a><span class="kw">FROM</span> $BASE_CONTAINER</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Add metadata to your image</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb38-1"><a href=""></a><span class="kw">LABEL</span> maintainer=<span class="st">"Jupyter Project &lt;jupyter@googlegroups.com&gt;"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-27" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-real-example-contd-1">Dockerfile: Structure <a href="https://github.com/jupyter/docker-stacks/blob/7a918f53599a896ec45cb6886c515be7adaee6c3/images/base-notebook/Dockerfile" target="_blank">Real Example</a> Cont’d</h3>
<div class="fragment">
<p>Set the default shell of an image (in this case <code>bash</code>):</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb39-1"><a href=""></a><span class="kw">SHELL</span> [<span class="st">"/bin/bash"</span>, <span class="st">"-o"</span>, <span class="st">"pipefail"</span>, <span class="st">"-c"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Set user (and group ID):</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb40-1"><a href=""></a><span class="kw">USER</span> root</span>
<span id="cb40-2"><a href=""></a><span class="co"># OR</span></span>
<span id="cb40-3"><a href=""></a><span class="kw">USER</span> ${NB_UID}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Run some (bash) commands (e.g.&nbsp;for Linux package installations):</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb41-1"><a href=""></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="at">--yes</span> <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb41-2"><a href=""></a>    <span class="ex">apt-get</span> install <span class="at">--yes</span> <span class="at">--no-install-recommends</span> <span class="dt">\</span></span>
<span id="cb41-3"><a href=""></a>    fonts-liberation <span class="dt">\</span></span>
<span id="cb41-4"><a href=""></a>    pandoc <span class="dt">\</span></span>
<span id="cb41-5"><a href=""></a>    run-one <span class="kw">&amp;&amp;</span> <span class="dt">\</span></span>
<span id="cb41-6"><a href=""></a>    <span class="ex">apt-get</span> clean <span class="kw">&amp;&amp;</span> <span class="fu">rm</span> <span class="at">-rf</span> /var/lib/apt/lists/<span class="pp">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-28" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-real-example-contd-2">Dockerfile: Structure <a href="https://github.com/jupyter/docker-stacks/blob/7a918f53599a896ec45cb6886c515be7adaee6c3/images/base-notebook/Dockerfile" target="_blank">Real Example</a> Cont’d</h3>
<div class="fragment">
<p>Change working directory:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb42-1"><a href=""></a><span class="kw">WORKDIR</span> /tmp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Set an environment variable:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb43-1"><a href=""></a><span class="kw">ENV</span> JUPYTER_PORT=8888</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Label a container’s port (it’s localhost) as relevant to a future user:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb44-1"><a href=""></a><span class="kw">EXPOSE</span> 8888, 5000</span>
<span id="cb44-2"><a href=""></a><span class="co"># OR</span></span>
<span id="cb44-3"><a href=""></a><span class="kw">EXPOSE</span> $JUPYTER_PORT</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Set the command to be executed when running a container from an image:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb45-1"><a href=""></a><span class="kw">CMD</span> [<span class="st">"start-notebook.py"</span>]  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-29" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-real-example-contd-3">Dockerfile: Structure <a href="https://github.com/jupyter/docker-stacks/blob/7a918f53599a896ec45cb6886c515be7adaee6c3/images/base-notebook/Dockerfile" target="_blank">Real Example</a> Cont’d</h3>
<div class="fragment">
<p>Copy files/directories (from host -&gt; future container):</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb46-1"><a href=""></a><span class="kw">COPY</span> start-notebook.py start-notebook.sh start-singleuser.py start-singleuser.sh /usr/local/bin/</span>
<span id="cb46-2"><a href=""></a><span class="kw">COPY</span> jupyter_server_config.py docker_healthcheck.py /etc/jupyter/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Check container health by running a command inside the container:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb47-1"><a href=""></a><span class="kw">HEALTHCHECK</span> <span class="op">--interval=3s</span> <span class="op">--timeout=1s</span> <span class="op">--start-period=3s</span> <span class="op">--retries=3</span> \</span>
<span id="cb47-2"><a href=""></a>    <span class="kw">CMD</span> <span class="ex">/etc/jupyter/docker_healthcheck.py</span> <span class="kw">||</span> <span class="bu">exit</span> 1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-30" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-your-first-dockerfile">Dockerfile: Your First Dockerfile</h3>
<p><strong>Use case extension</strong>: Use <code>Dockerfile</code> to customize the image we used previously.</p>
<div class="fragment">
<p>Make a new directory (or just use an existing one that is empty) and create a file named <code>Dockerfile</code> there. (Keep the file open in your editor.)</p>
<p>Let’s build a simple Dockerfile that extends our original Jupyter container layer by layer now.</p>
</div>
</section>
<section id="how-31" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-your-first-dockerfile-contd">Dockerfile: Your First Dockerfile Cont’d</h3>
<div>
<ol type="1">
<li class="fragment"><p>To motivate our use case, run the same Jupyter image we used earlier, from that directory:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href=""></a> <span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--rm</span> <span class="dt">\</span></span>
<span id="cb48-2"><a href=""></a>     <span class="at">--user</span> <span class="st">"</span><span class="va">$(</span><span class="fu">id</span> <span class="at">-u</span><span class="va">)</span><span class="st">"</span> <span class="at">--group-add</span> users <span class="dt">\</span></span>
<span id="cb48-3"><a href=""></a>     <span class="at">-p</span> 8888:8888 <span class="dt">\</span></span>
<span id="cb48-4"><a href=""></a>     <span class="at">-v</span> <span class="st">"</span><span class="va">${PWD}</span><span class="st">"</span>/:/home/jovyan/work <span class="dt">\</span></span>
<span id="cb48-5"><a href=""></a>     quay.io/jupyter/scipy-notebook:python-3.11.9 </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li class="fragment"><p>Go to your Jupyter session via a web browser and create a new notebook (which should persist even if we delete the container later).<br>
</p></li>
</ol>
</div>
</section>
<section id="how-32" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-your-first-dockerfile-contd-1">Dockerfile: Your First Dockerfile Cont’d</h3>
<div>
<ol start="3" type="1">
<li class="fragment"><p>In that notebook, in the first cell, import the pandas package and make a test dataframe. No surprises there.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href=""></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb49-2"><a href=""></a>df <span class="op">=</span> pd.DataFrame(<span class="bu">dict</span>(a<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>], b<span class="op">=</span>[<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li class="fragment"><p>Let’s say we want to use <code>plotly</code> for our data visualization. In a second cell, try:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href=""></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb50-2"><a href=""></a>fig <span class="op">=</span> px.bar(df, x<span class="op">=</span><span class="st">'b'</span>, y<span class="op">=</span><span class="st">'a'</span>)</span>
<span id="cb50-3"><a href=""></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then save this notebook.<br>
</p></li>
</ol>
</div>
</section>
<section id="how-33" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd">Dockerfile: Structure Cont’d</h3>
<div class="fragment">
<p>Uh-oh! No plotly! We could install it via the usual means (e.g.&nbsp;<code>pip</code> or <code>conda</code> and build a <code>requirements.txt</code>). But let’s install it via <code>poetry</code> instead! It’s becoming a more popular way to <a href="https://python-poetry.org/" target="_blank">manage Python dependencies and packages</a>; a good tool to learn. Plus, it’s the default for our team.</p>
</div>
</section>
<section id="how-34" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd-1">Dockerfile: Structure Cont’d</h3>
<div>
<ol start="5" type="1">
<li class="fragment"><p>Bash into the running Jupyter container and <code>cd</code> into the <code>work</code> directory.</p></li>
<li class="fragment"><p>Then:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a href=""></a><span class="ex">pip</span> install poetry==1.8.2 <span class="dt">\</span></span>
<span id="cb51-2"><a href=""></a>    <span class="kw">&amp;&amp;</span> <span class="ex">poetry</span> config virtualenvs.create false</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li class="fragment"><p>Then initialize a <code>poetry</code> project in this directory with:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb52-1"><a href=""></a><span class="ex">poetry</span> init</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Follow the prompts; accept all the defaults for now.</p></li>
</ol>
</div>
</section>
<section id="how-35" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd-2">Dockerfile: Structure Cont’d</h3>
<div>
<ul>
<li class="fragment"><code>poetry</code> instantiates a <code>pyproject.toml</code>: keeps track of your python dependencies.</li>
<li class="fragment">When we <code>add</code> dependencies, generates a <code>poetry.lock</code> file: pins our exact dependency versions</li>
<li class="fragment">Great to manage dependencies robustly!</li>
<li class="fragment">Plan: manage all our Python dependencies and persist them via these Poetry files; exploit volume-sharing with the host to persist.</li>
<li class="fragment">Trick: commit Dockerfile + <code>poetry</code> files to version control =&gt; achieve full container replicability on our/others’ machines!</li>
</ul>
</div>
</section>
<section id="how-36" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd-3">Dockerfile: Structure Cont’d</h3>
<div>
<ol start="8" type="1">
<li class="fragment"><p>Finally, let’s install/add <code>plotly</code> inside our container’s <code>bash</code> session:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb53-1"><a href=""></a><span class="ex">poetry</span> add plotly</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that now we have both <code>pyproject.toml</code> and <code>poetry.lock</code> on both the host and the container side!</p></li>
<li class="fragment"><p>Now go back to your Jupyter Lab and check that <code>plotly</code> works in the cell where it didn’t before!</p></li>
</ol>
</div>
</section>
<section id="how-37" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd-4">Dockerfile: Structure Cont’d</h3>
<div class="fragment">
<p>Once the container is removed, the steps of us installing <code>poetry</code> and <code>plotly</code> are gone! Let’s fix that! <code>docker stop</code> the Jupyter container. Then go back to the <code>Dockerfile</code> you created:</p>
<ol start="10" type="1">
<li>First, let’s add our starting point. Copy the name and the digest for the Jupyter image we’ve been using:</li>
</ol>
<div class="sourceCode" id="cb54"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb54-1"><a href=""></a><span class="kw">FROM</span> quay.io/jupyter/scipy-notebook@sha256:3b8d0f5253e3acb5395bee6638bf51762b84e159f59b27c46d0b9cd27fac2306</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ol start="11" type="1">
<li>Replicate what we just did inside the container. But now add these lines to the <code>Dockerfile</code>:</li>
</ol>
<div class="sourceCode" id="cb55"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb55-1"><a href=""></a><span class="kw">RUN</span> <span class="ex">pip</span> install poetry==1.8.2 <span class="dt">\</span></span>
<span id="cb55-2"><a href=""></a>    <span class="kw">&amp;&amp;</span> <span class="ex">poetry</span> config virtualenvs.create false</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-38" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd-5">Dockerfile: Structure Cont’d</h3>
<div>
<ol start="12" type="1">
<li class="fragment"><p>We also need to add these two commands to copy persisted Poetry files and use them to install dependencies (so far, only <code>plotly</code>):</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb56-1"><a href=""></a><span class="kw">COPY</span> poetry.lock pyproject.toml ./work/</span>
<span id="cb56-2"><a href=""></a></span>
<span id="cb56-3"><a href=""></a><span class="kw">RUN</span> <span class="bu">cd</span> work <span class="dt">\</span></span>
<span id="cb56-4"><a href=""></a>    <span class="kw">&amp;&amp;</span> <span class="ex">poetry</span> install <span class="at">--no-interaction</span> <span class="dt">\</span></span>
<span id="cb56-5"><a href=""></a>    <span class="kw">&amp;&amp;</span> <span class="fu">rm</span> poetry.lock pyproject.toml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</div>
<aside class="notes">
<p>Note that we’re copying because volume mounting happens only at run time, not build time. So we need these files copied!</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="how-39" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd-6">Dockerfile: Structure Cont’d</h3>
<div class="fragment">
<p>So far, this is our <code>Dockerfile</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode numberSource dockerfile number-lines code-with-copy"><code class="sourceCode dockerfile"><span id="cb57-1"><a href=""></a><span class="kw">FROM</span> quay.io/jupyter/scipy-notebook@sha256:3b8d0f5253e3acb5395bee6638bf51762b84e159f59b27c46d0b9cd27fac2306</span>
<span id="cb57-2"><a href=""></a></span>
<span id="cb57-3"><a href=""></a><span class="kw">RUN</span> <span class="ex">pip</span> install poetry==1.8.2 <span class="dt">\</span></span>
<span id="cb57-4"><a href=""></a>    <span class="kw">&amp;&amp;</span> <span class="ex">poetry</span> config virtualenvs.create false</span>
<span id="cb57-5"><a href=""></a></span>
<span id="cb57-6"><a href=""></a><span class="kw">COPY</span> poetry.lock pyproject.toml ./work/</span>
<span id="cb57-7"><a href=""></a></span>
<span id="cb57-8"><a href=""></a><span class="kw">RUN</span> <span class="bu">cd</span> work <span class="dt">\</span></span>
<span id="cb57-9"><a href=""></a>    <span class="kw">&amp;&amp;</span> <span class="ex">poetry</span> install <span class="at">--no-interaction</span> <span class="dt">\</span></span>
<span id="cb57-10"><a href=""></a>    <span class="kw">&amp;&amp;</span> <span class="fu">rm</span> poetry.lock pyproject.toml</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-40" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-structure-contd-7">Dockerfile: Structure Cont’d</h3>
<div>
<p>Caching strategy:</p>
<ul>
<li class="fragment">Docker is smart. Using cache, from a <code>Dockerfile</code> it will only rebuild from <em>the last unchanged layer</em>.</li>
<li class="fragment">Conclusion: the more often a layer changes, the lower it should be!</li>
<li class="fragment">For debugging/rebuilding without cache: <code>--no-cache</code> flag with <code>docker build</code></li>
</ul>
</div>
</section>
<section id="how-41" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-build">Dockerfile: Build</h3>
<div class="fragment">
<p>Remember, to “compile” a <code>Dockerfile</code> into an image we use <a href="https://docs.docker.com/reference/cli/docker/buildx/build/" target="_blank">the <code>build</code> command</a>. Syntax:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb58-1"><a href=""></a><span class="ex">docker</span> build <span class="pp">[</span><span class="ss">OPTIONS</span><span class="pp">]</span> PATH <span class="kw">|</span> <span class="ex">URL</span> <span class="kw">|</span> <span class="ex">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>About <a href="https://docs.docker.com/build/building/context/" target="_blank">build context</a>:</p>
<ul>
<li><code>PATH | URL | -</code> : context you pass. Docker will not recognize anything outside of that context</li>
<li>Can restrict files/directories in the context further via <code>.dockerignore</code><br>
</li>
</ul>
</div>
</section>
<section id="how-42" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-build-contd">Dockerfile: Build Cont’d</h3>
<div class="fragment">
<p>Let’s “compile” our <code>Dockerfile</code> and name it <code>ds_dev_test</code>:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb59-1"><a href=""></a><span class="ex">docker</span> build <span class="at">-t</span> ds_dev_test . </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="how-43" class="slide level2">
<h2>How?</h2>
<h3 id="dockerfile-run">Dockerfile: Run</h3>
<div class="fragment">
<p>Finally, let’s enjoy the fruits of our labour:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href=""></a><span class="ex">docker</span> run <span class="at">-it</span> <span class="at">--rm</span> <span class="dt">\</span></span>
<span id="cb60-2"><a href=""></a>    <span class="at">--user</span> <span class="st">"</span><span class="va">$(</span><span class="fu">id</span> <span class="at">-u</span><span class="va">)</span><span class="st">"</span> <span class="at">--group-add</span> users <span class="dt">\</span></span>
<span id="cb60-3"><a href=""></a>    <span class="at">-p</span> 8888:8888 <span class="dt">\</span></span>
<span id="cb60-4"><a href=""></a>    <span class="at">-v</span> <span class="st">"</span><span class="va">${PWD}</span><span class="st">"</span>/:/home/jovyan/work <span class="dt">\</span></span>
<span id="cb60-5"><a href=""></a>    ds_dev_test </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="best-practices" class="slide level2">
<h2><a href="https://docs.docker.com/build/building/best-practices/" target="_blank">Best Practices</a></h2>
<div>
<ul>
<li class="fragment">Dockerfile:
<ul>
<li class="fragment">Using the <code>sha256</code> hash is a good way to make the image reference more replicable</li>
<li class="fragment">Combine and minimize the number of layers</li>
<li class="fragment">Think of the layer order strategically
<ul>
<li class="fragment">Rule of thumb: layers you expect to change more often should go towards the bottom of the <code>Dockerfile</code></li>
</ul></li>
<li class="fragment">Minimize the <a href="https://docs.docker.com/build/building/context/" target="_blank">build context</a> by <a href="https://docs.docker.com/build/building/context/#dockerignore-files" target="_blank">using a <code>.dockerignore</code></a>.<br>
</li>
<li class="fragment">For security, avoid using <code>root</code> user if you can</li>
</ul></li>
</ul>
</div>
</section>
<section id="best-practices-1" class="slide level2">
<h2><a href="https://docs.docker.com/build/building/best-practices/" target="_blank">Best Practices</a></h2>
<div>
<ul>
<li class="fragment">Images:
<ul>
<li class="fragment">Only pull and run images you trust</li>
</ul></li>
<li class="fragment">Containers:
<ul>
<li class="fragment">Remember: shared volumes are treated as own by a container</li>
</ul></li>
</ul>
</div>
</section>
<section id="recap" class="slide level2">
<h2>Recap</h2>
<div>
<ul>
<li class="fragment">What containerization is
<ul>
<li class="fragment">Package your apps/models into a portable, reproducible, isolated environment</li>
</ul></li>
<li class="fragment">Why care
<ul>
<li class="fragment">Good for your resume</li>
<li class="fragment">Extends your core ML skills</li>
<li class="fragment">Practical</li>
</ul></li>
<li class="fragment">How to get started
<ul>
<li class="fragment">TLDR: registry/dockerfile -&gt; image(s) -&gt; container(s) + read the <a href="https://docs.docker.com/reference/" target="_blank">docs</a> and practice<br>
</li>
</ul></li>
</ul>
</div>
</section>
<section id="further-learning" class="slide level2">
<h2>Further Learning</h2>
<div class="fragment">
<p>More Docker:</p>
<ul>
<li>Multistage builds<br>
</li>
<li>Microservices</li>
</ul>
</div>
<div class="fragment">
<p><a href="https://docs.docker.com/reference/" target="_blank">Docker</a> -&gt; <a href="https://docs.docker.com/compose/" target="_blank">Docker Compose</a> -&gt; <a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/" target="_blank">Kubernetes</a></p>
</div>
</section>
<section id="referencesresources" class="slide level2">
<h2>References/Resources</h2>
<p><a name="cite_note-1" href=""></a>1. <a href="#/cite_ref-1">^</a> <a href="https://cloud.google.com/learn/what-are-containers" target="_blank">What are Containers?</a><br>
<a name="cite_note-2" href=""></a>2. <a href="#/cite_ref-2">^</a> <a href="https://www.redhat.com/en/topics/containers" target="_blank">Understanding containers</a><br>
<a name="cite_note-3" href=""></a>3. <a href="#/cite_ref-3">^</a> <a href="https://www.docker.com/resources/what-container/" target="_blank">Use containers to Build, Share and Run your applications</a><br>
<a name="cite_note-4" href=""></a>4. <a href="#/cite_ref-4">^</a> <a href="https://docs.docker.com/guides/docker-concepts/the-basics/what-is-a-registry/" target="_blank">What is a registry?</a><br>
<a name="cite_note-5" href=""></a>5. <a href="#/cite_ref-5">^</a> <a href="https://gitlab.apollo.crowe.com/taskforces/people-onboarding/-/wikis/New-Hires/Learning/docker/docker-primer" target="_blank">Docker Primer (Crowe Internal)</a><br>
<a name="cite_note-6" href=""></a>6. <a href="#/cite_ref-6">^</a> <a href="https://docs.docker.com/reference/" target="_blank">Docker Reference documentation</a><br>
<a name="cite_note-7" href=""></a>7. <a href="#/cite_ref-7">^</a> <a href="https://jupyter-docker-stacks.readthedocs.io/en/latest/using/troubleshooting.html" target="_blank">Jupyter Stacks Docs: Troubleshooting Common Problems</a><br>
<a name="cite_note-8" href=""></a>8. <a href="#/cite_ref-8">^</a> <a href="https://docs.docker.com/compose/" target="_blank">Docker Compose overview</a><br>
<a name="cite_note-9" href=""></a>9. <a href="#/cite_ref-9">^</a> <a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/" target="_blank">Learn Kubernetes Basics</a></p>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="docker_tutorial_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="docker_tutorial_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="docker_tutorial_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="docker_tutorial_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script>
      function custom_title_slide_footer() {
        let footer = document.querySelector('div.footer');

        let title_slide = document.querySelector("section#title-slide");
        let title_slide_footer = title_slide.getAttribute('data-footer');
        let global_footer_text = footer.innerHTML;

        if (title_slide.classList.contains('present')) {
          footer.innerHTML = title_slide_footer;
        }
      
        Reveal.on('slidechanged', event => {  
          if(Reveal.isFirstSlide()) {
            footer.innerHTML = title_slide_footer;
          } else {
            footer.innerHTML = global_footer_text;
          }
        });
      }
      
      window.onload = custom_title_slide_footer();
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>